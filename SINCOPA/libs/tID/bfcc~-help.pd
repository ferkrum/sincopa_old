#N canvas 307 91 945 677 10;
#X obj 54 56 *~;
#X obj 81 56 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 77 107 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 259 558 See timbreID helpfile:;
#X obj 351 575 timbreID;
#X msg 134 192 window 2048;
#N canvas 0 22 450 300 (subpatch) 0;
#X array bfcc-graph 47 float 0;
#X coords 0 1 46 -1 200 140 1;
#X restore 460 323 graph;
#X floatatom 667 382 5 0 0 0 - - -;
#X text 664 365 Resize graph if needed.;
#X obj 54 510 bfcc~ 1024 0.5;
#X text 63 544 Send list of BFCCs to the classification external.;
#X text 186 473 Construct a new filterbank \; with arbitrary Bark spacing.
;
#X text 74 90 Bang to output BFCCs as a list.;
#X obj 54 32 adc~;
#X obj 54 576 list prepend 0;
#X obj 54 598 s bfcc-graph;
#X msg 667 400 \; bfcc-graph resize \$1 \;;
#X msg 667 436 \; bfcc-graph const 0;
#X obj 157 238 hradio 15 1 0 4 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X msg 157 258 window_function \$1;
#X msg 179 315 power_spectrum \$1;
#X text 132 174 Change analysis window size.;
#X obj 179 297 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 183 332 Use power spectrum rather than \; magnitude spectrum
to compute BFCCs.;
#X text 223 215 Change windowing function. \; Blackman \, Cosine \,
Hamming \, \; or Hann. Hann is the default.;
#X msg 186 455 filterbank 1;
#X obj 107 119 bang~;
#X obj 107 140 spigot 0;
#X obj 172 140 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 151 119 Bang repeatedly...;
#X text 458 34 Bark-frequency cepstrum is actually much different than
raw cepstrum. The most significant differences are an emphasis on lower
spectral content and the use of a DCT rather than an FT in the final
step of the process. When bfcc~ receives a bang \, it spits out the
BFCCs for the most recent analysis window as a list. \; \; This list
can be sent to the timbreID external in order to identify percussive
timbres in real time. \; \; Audio buffering and windowing are taken
care of by the external \, so there is no need for tabreceive~ or block~.
You can set the window size with a creation argument \, or change it
with the "window" message. The second creation argument specifies the
Bark-spacing of the filterbank. This can also be changed later with
the "filterbank" message. The default half-Bark spacing produces a
46-component BFCC vector regardless of window size. BFCC components
are normalized to be between 0 and 1 \, and the first BFCC will always
have a value of 1.0.;
#X obj 189 377 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 189 395 normalize \$1;
#X text 193 412 Normalize spectrum before BFCC \; computation. Default:
ON.;
#X connect 0 0 9 0;
#X connect 1 0 0 1;
#X connect 2 0 9 0;
#X connect 5 0 9 0;
#X connect 7 0 16 0;
#X connect 9 0 14 0;
#X connect 13 0 0 0;
#X connect 14 0 15 0;
#X connect 18 0 19 0;
#X connect 19 0 9 0;
#X connect 20 0 9 0;
#X connect 22 0 20 0;
#X connect 25 0 9 0;
#X connect 26 0 27 0;
#X connect 27 0 9 0;
#X connect 28 0 27 1;
#X connect 31 0 32 0;
#X connect 32 0 9 0;
