#N canvas 276 91 852 574 10;
#X obj 146 225 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 85 507 10 0 0 0 - - -;
#X text 155 338 Change window size.;
#X text 372 324 See timbreID helpfile:;
#X obj 374 344 timbreID;
#X msg 157 356 window 2048;
#X obj 85 464 specIrregularity~ 1024;
#X obj 157 394 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 157 414 algorithm \$1;
#X text 168 435 Choose either Jensen (default) or Krimphoff algorithm.
;
#X obj 25 39 phasor~ 440;
#X obj 85 77 noise~;
#X obj 25 167 *~;
#X obj 55 167 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 85 167 *~;
#X obj 115 167 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array magspec-graph 512 float 0;
#X coords 0 0.2 511 0 200 140 1;
#X restore 572 336 graph;
#X obj 146 264 magSpec~ 1024;
#X obj 146 285 list prepend 0;
#X obj 146 306 s magspec-graph;
#X text 143 207 Bang to output irregularity.;
#X text 167 223 Also plots spectrum.;
#X obj 85 98 lop~ 1000;
#X obj 25 60 *~ 2;
#X obj 25 81 -~ 1;
#X text 372 27 Spectral Irregularity has two common definitions: one
by Jensen \, the other by Krimphoff. The calculation differs \, but
the general idea of both is to inspect a spectrum from low to high
and see how much each frequency bin compares to its immediate neighbors.
For jagged spectra \, irregularity will be high \, and and for smooth
contoured spectra \, it will be low. McAdams et. al identified this
measure as important to timbre perception in 2005 At left \, the irregularity
of a sawtooth wave (with a spiky spectrum) is much more than low-pass
filtered noise. \; This feature can be sent to the timbreID external
in order to identify percussive timbres in real time. \; \; Audio buffering
and Hann windowing are taken care of by the external \, so there is
no need for tabreceive~ or block~. You can set the window size with
a creation argument \, or change it with the "window" message.;
#X connect 0 0 6 0;
#X connect 0 0 17 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 10 0 23 0;
#X connect 11 0 22 0;
#X connect 12 0 6 0;
#X connect 12 0 17 0;
#X connect 13 0 12 1;
#X connect 14 0 6 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 22 0 14 0;
#X connect 23 0 24 0;
#X connect 24 0 12 0;
